<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Woodcraft.Desktop.ViewModels"
        x:Class="Woodcraft.Desktop.Views.AddJointDialog"
        x:DataType="vm:AddJointDialogViewModel"
        x:CompileBindings="True"
        Title="Join Parts"
        Width="440" Height="520"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        ShowInTaskbar="False"
        Background="{DynamicResource BackgroundDarkBrush}">

    <Window.Styles>
        <Style Selector="ListBoxItem">
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        <Style Selector="ListBoxItem:pointerover">
            <Setter Property="Background" Value="{DynamicResource BackgroundLighterBrush}"/>
        </Style>
        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" Value="{DynamicResource AccentPrimaryBrush}"/>
        </Style>
    </Window.Styles>

    <DockPanel Margin="20">
        <!-- Header -->
        <StackPanel DockPanel.Dock="Top" Margin="0,0,0,16">
            <StackPanel Orientation="Horizontal" Spacing="12">
                <PathIcon Data="{StaticResource IconJoinery}" Width="24" Height="24"
                          Foreground="{DynamicResource AccentPrimaryBrush}"/>
                <TextBlock Text="Join Parts" FontSize="20" FontWeight="SemiBold"/>
            </StackPanel>
            <TextBlock Text="Create a joint between two parts" Classes="muted" Margin="36,4,0,0"/>
        </StackPanel>

        <!-- Footer Buttons -->
        <Border DockPanel.Dock="Bottom"
                BorderBrush="{DynamicResource SurfaceStrokeBrush}"
                BorderThickness="0,1,0,0"
                Padding="0,16,0,0"
                Margin="0,16,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                <Button Content="Cancel" Command="{Binding CancelCommand}" Padding="20,10"/>
                <Button Command="{Binding ConfirmCommand}" Classes="primary" Padding="20,10">
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <PathIcon Data="{StaticResource IconJoinery}" Width="14" Height="14"/>
                                <TextBlock Text="Create Joint"/>
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>
            </StackPanel>
        </Border>

        <!-- Content -->
        <StackPanel Spacing="16">
            <!-- Parts Info -->
            <Border Classes="card">
                <StackPanel Spacing="8">
                    <TextBlock Text="Parts" FontWeight="SemiBold"/>
                    <Grid ColumnDefinitions="Auto,8,*" RowDefinitions="Auto,8,Auto">
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Part A:" Classes="muted"/>
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding PartAName}" FontWeight="SemiBold"/>
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Part B:" Classes="muted"/>
                        <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding PartBName}" FontWeight="SemiBold"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Joint Type -->
            <Border Classes="card">
                <StackPanel Spacing="8">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{StaticResource IconJoinery}" Width="14" Height="14"
                                  Foreground="{DynamicResource AccentPrimaryBrush}"/>
                        <TextBlock Text="Joint Type" FontWeight="SemiBold"/>
                    </StackPanel>

                    <ListBox ItemsSource="{Binding JoineryTypes}"
                             SelectedItem="{Binding SelectedType}"
                             MaxHeight="200">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>

            <!-- Description -->
            <Border Classes="card">
                <StackPanel Spacing="4">
                    <TextBlock Text="Description" FontWeight="SemiBold" FontSize="11"/>
                    <TextBlock Text="{Binding Description}"
                               TextWrapping="Wrap"
                               FontSize="12"
                               Classes="muted"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </DockPanel>
</Window>
